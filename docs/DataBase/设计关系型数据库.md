# 八、设计关系型数据库

关系数据库管理系统（RDBMS）架构图如下：

<div align="center"><img src="https://gitee.com/duhouan/ImagePro/raw/master/java-notes/database/db.png"/></div>

## 存储

存储即文件系统。存储介质可以是机械硬盘、SSD 固态。

## 程序实例

- **存储管理**

  对数据格式、文件风格进行统一管理，将物理数据通过逻辑形式组织、表示出来。

  优化：一次性读取多行，逻辑存取单位是页（page）。

- **缓存机制**

  将取出的数据放入缓存中，一次性加载多个页数据，相当一部分不是本次访问所需的行。根据“一旦数据被访问，其相邻数据极有可能下次被访问到”，优化访问效率。

  缓存管理机制：可以使用 [LRU](https://github.com/DuHouAn/Java-Notes/blob/master/docs/LeetCode/12%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.md#146) 对缓存进行管理。

- **SQL 解析**

  提供给外界指令来操作数据库，即可读的 SQL 语言。

  优化：可以将 SQL 缓存，方便下次解析。缓存不宜过大，管理缓存的算法中要有淘汰机制。

- **日志管理**

  主从同步、灾难恢复。

- **权限划分**

  支持多用户。

- **容灾机制**

  数据库挂了，进行恢复，恢复到什么程度。

- **索引管理**

  引入索引，提高查询效率。

- **锁管理**

  引入锁机制，支持并发操作。